# Configuration for BregmanPruner callback (now using AdaBreg by default)
model_pruning:
  _target_: src.callbacks.pruning.pruning_selector.PruningSelector
  method: "bregman"
  method_config:
    # Optimizer configuration
    optimizer_name: "linbreg"    # adabreg by default
    lr: 1e-3                     # base learning rate
    delta: 1.0                   # Bregman δ-parameter (elastic‐net)
    betas: [0.9, 0.999]          # Adam-style (β₁, β₂) for AdaBreg
    eps: 1e-8                    # numerical stability for AdaBreg

    # Regularization configuration
    regularizer_name: "l1"       # Options: "l1", "l1_l2", "l1_l2_conv", "soft_bernoulli"
    lamda: 1e-3                  # regularization strength

    # Sparse initialization
    sparse_init: true
    init_sparsity: 0.99           # start with 90% weights zeroed

    # Adaptive regularization (optional)
    target_sparsity: 0.85        # set to desired final sparsity for λ adjustment

    # Parameter selection
    parameter_selection: "weights_only"
    custom_parameter_fn: null

    # Monitoring and verbosity
    collect_metrics: true
    verbose: 1
